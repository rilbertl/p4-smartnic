#!/bin/bash

sudo /opt/netronome/p4/bin/rtecli tables add -t ingress::espelho_udp_inner -r capture_webcam -m '{ "udp_inner.srcPort" : { "value" : "39705" }, "ipv4_inner.dstAddr" : { "value" : "192.168.58.102" }, "udp_inner.dstPort" : { "value" : "2509" } }' -a '{ "type": "ingress::encaminhaDecapture_inner", "data": { "egressPort": { "value": "v0.2" }, "dataPort": { "value": "2509" }, "ip_dec1": { "value": "192.168.58.103" }, "port_dec1": { "value": "39017" }, "mac_dec1": { "value": "00:15:4d:00:00:02" }, "ip_dec2": { "value": "192.168.58.104" }, "port_dec2": { "value": "37597" }, "mac_dec2": { "value": "00:15:4d:00:00:03" } } }'
sudo /opt/netronome/p4/bin/rtecli tables add -t ingress::espelho_udp -r capture_brio -m '{ "ipv4.srcAddr" : { "value" : "192.168.58.101" }, "udp.srcPort" : { "value" : "50556" }, "ipv4.dstAddr" : { "value" : "192.168.58.102" }, "udp.dstPort" : { "value" : "2510" } }' -a '{ "type": "ingress::encaminhaDecapture", "data": { "egressPort": { "value": "v0.2" }, "ip_dec1": { "value": "192.168.58.105" }, "port_dec1": { "value": "56621" }, "mac_dec1": { "value": "00:15:4d:00:00:04" }, "ip_dec2": { "value": "192.168.58.106" }, "port_dec2": { "value": "40050" }, "mac_dec2": { "value": "00:15:4d:00:00:05" } } }'
