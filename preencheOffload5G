#!/bin/bash

sudo /opt/netronome/p4/bin/rtecli tables add -t ingress::espelho_udp_inner -r capture_webcam -m '{ "udp_inner.srcPort" : { "value" : "46461" }, "ipv4_inner.dstAddr" : { "value" : "192.168.58.102" }, "udp_inner.dstPort" : { "value" : "2509" } }' -a '{ "type": "ingress::encaminhaDecapture_inner", "data": { "egressPort": { "value": "v0.2" }, "dataPort": { "value": "2509" }, "ip_dec1": { "value": "192.168.58.103" }, "port_dec1": { "value": "42038" }, "mac_dec1": { "value": "00:15:4d:00:00:02" } } }'
sudo /opt/netronome/p4/bin/rtecli tables add -t ingress::drop_packet_middleware -r capture_webcam -m '{ "ipv4.srcAddr" : { "value" : "192.168.58.102" }, "udp.srcPort" : { "value" : "2509" }, "ipv4.dstAddr" : { "value" : "192.168.58.103" }, "udp.dstPort" : { "value" : "42038" } }' -a '{ "type": "ingress::drop" }'
